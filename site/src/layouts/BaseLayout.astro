---
import '../styles/global.css';

interface Props {
  title?: string;
}

const { title = 'Irina SMM | Expert Social Media Management' } = Astro.props;
---
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300..800&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <script>
    // Scroll animations
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-visible');
          const children = entry.target.querySelectorAll('.stagger-item');
          children.forEach((child, index) => {
            setTimeout(() => {
              (child as HTMLElement).style.opacity = '1';
              (child as HTMLElement).style.animation = 'fadeInUp 0.6s ease-out both';
            }, index * 150);
          });
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

    document.querySelectorAll('.scroll-animate').forEach(el => observer.observe(el));

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector((this as HTMLAnchorElement).getAttribute('href')!);
        if (target) {
          const navbar = document.querySelector('.header-navbar') as HTMLElement;
          const offset = navbar ? navbar.offsetHeight : 0;
          const top = target.getBoundingClientRect().top + window.scrollY - offset;
          window.scrollTo({ top, behavior: 'smooth' });
        }
      });
    });

    // Mobile menu
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    if (mobileMenuButton && mobileMenu) {
      const closeMenu = () => {
        mobileMenu.classList.remove('is-open');
        mobileMenuButton.setAttribute('aria-expanded', 'false');
      };
      mobileMenuButton.addEventListener('click', (event) => {
        event.stopPropagation();
        const isOpen = mobileMenu.classList.toggle('is-open');
        mobileMenuButton.setAttribute('aria-expanded', String(isOpen));
      });
      mobileMenu.querySelectorAll('a').forEach(link => link.addEventListener('click', closeMenu));
      document.addEventListener('click', (event) => {
        if (!mobileMenu.contains(event.target as Node) && !mobileMenuButton.contains(event.target as Node)) {
          closeMenu();
        }
      });
    }
  </script>
  <body class="font-heading bg-light text-dark leading-relaxed">
    <header class="bg-white py-3 md:py-5 top-0 z-50 shadow-sm header-navbar">
      <div class="container max-w-[1100px] mx-auto px-4 relative">
        <nav class="flex justify-between items-center">
          <div class="logo font-accent text-primary italic text-2xl md:text-3xl font-medium">
            Ciobanu Irina
          </div>
          <button id="mobile-menu-button" class="mobile-menu-button md:hidden" type="button"
            aria-expanded="false" aria-controls="mobile-menu">
            <span class="sr-only">Deschide meniul</span>
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 7h16M4 12h16M4 17h16" />
            </svg>
          </button>
          <ul class="hidden md:flex gap-2 md:gap-5 list-none items-center text-sm md:text-base">
            <li><a href="#services" class="no-underline text-dark font-semibold hover:text-primary transition-colors">Pachete</a></li>
            <li><a href="#results-video" class="no-underline text-dark font-semibold hover:text-primary transition-colors">Case-uri</a></li>
            <li><a href="#contact" class="no-underline text-dark font-semibold hover:text-primary transition-colors">Contact</a></li>
          </ul>
        </nav>
        <div id="mobile-menu" class="mobile-menu md:hidden" role="menu" aria-label="Meniu principal">
          <a role="menuitem" href="#services">Pachete</a>
          <a role="menuitem" href="#results-video">Case-uri</a>
          <a role="menuitem" href="#reviews">Recenzii</a>
          <a role="menuitem" href="#contact">Contact</a>
        </div>
      </div>
    </header>
    <slot />
    <footer class="bg-white border-t border-gray-100 py-6 text-center text-sm text-gray-500 font-heading">
      Â© {new Date().getFullYear()} Ciobanu Irina. Toate drepturile rezervate.
    </footer>
  </body>
</html>